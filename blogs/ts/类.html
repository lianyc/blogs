<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>类 | 疏雨滴梧桐</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/blogs/assets/css/0.styles.9554e1cb.css" as="style"><link rel="preload" href="/blogs/assets/js/app.806ab8a6.js" as="script"><link rel="preload" href="/blogs/assets/js/7.d7a2e24c.js" as="script"><link rel="preload" href="/blogs/assets/js/2.ccd2aa3f.js" as="script"><link rel="preload" href="/blogs/assets/js/1.39ac306c.js" as="script"><link rel="preload" href="/blogs/assets/js/57.56a23c25.js" as="script"><link rel="prefetch" href="/blogs/assets/js/10.a6b2c697.js"><link rel="prefetch" href="/blogs/assets/js/11.35a46a6c.js"><link rel="prefetch" href="/blogs/assets/js/14.70dddfe0.js"><link rel="prefetch" href="/blogs/assets/js/15.5db4f2d0.js"><link rel="prefetch" href="/blogs/assets/js/16.b8644800.js"><link rel="prefetch" href="/blogs/assets/js/17.1b24a29a.js"><link rel="prefetch" href="/blogs/assets/js/18.6015c4d3.js"><link rel="prefetch" href="/blogs/assets/js/19.3bea6596.js"><link rel="prefetch" href="/blogs/assets/js/20.b628e4c1.js"><link rel="prefetch" href="/blogs/assets/js/21.a2f2c75a.js"><link rel="prefetch" href="/blogs/assets/js/22.10b5eb39.js"><link rel="prefetch" href="/blogs/assets/js/23.10960250.js"><link rel="prefetch" href="/blogs/assets/js/24.12ddf36e.js"><link rel="prefetch" href="/blogs/assets/js/25.f2a73819.js"><link rel="prefetch" href="/blogs/assets/js/26.980e1d1d.js"><link rel="prefetch" href="/blogs/assets/js/27.c99eec75.js"><link rel="prefetch" href="/blogs/assets/js/28.49ec7d1d.js"><link rel="prefetch" href="/blogs/assets/js/29.9493a6af.js"><link rel="prefetch" href="/blogs/assets/js/3.423e9cfe.js"><link rel="prefetch" href="/blogs/assets/js/30.dd8bccda.js"><link rel="prefetch" href="/blogs/assets/js/31.041d18e0.js"><link rel="prefetch" href="/blogs/assets/js/32.d4fa8346.js"><link rel="prefetch" href="/blogs/assets/js/33.c9c9d5d3.js"><link rel="prefetch" href="/blogs/assets/js/34.c47e9ec3.js"><link rel="prefetch" href="/blogs/assets/js/35.3d108d64.js"><link rel="prefetch" href="/blogs/assets/js/36.051463df.js"><link rel="prefetch" href="/blogs/assets/js/37.e747f0b3.js"><link rel="prefetch" href="/blogs/assets/js/38.efb6a727.js"><link rel="prefetch" href="/blogs/assets/js/39.147404ae.js"><link rel="prefetch" href="/blogs/assets/js/4.d69c7431.js"><link rel="prefetch" href="/blogs/assets/js/40.616a75c7.js"><link rel="prefetch" href="/blogs/assets/js/41.44b2e94a.js"><link rel="prefetch" href="/blogs/assets/js/42.a22f9e23.js"><link rel="prefetch" href="/blogs/assets/js/43.fbf4a79c.js"><link rel="prefetch" href="/blogs/assets/js/44.446d9a91.js"><link rel="prefetch" href="/blogs/assets/js/45.222df074.js"><link rel="prefetch" href="/blogs/assets/js/46.06a8892b.js"><link rel="prefetch" href="/blogs/assets/js/47.2967ac82.js"><link rel="prefetch" href="/blogs/assets/js/48.4f4b880c.js"><link rel="prefetch" href="/blogs/assets/js/49.ffb64880.js"><link rel="prefetch" href="/blogs/assets/js/5.fcdaf429.js"><link rel="prefetch" href="/blogs/assets/js/50.bd1268cb.js"><link rel="prefetch" href="/blogs/assets/js/51.f6c5ccff.js"><link rel="prefetch" href="/blogs/assets/js/52.e24903f8.js"><link rel="prefetch" href="/blogs/assets/js/53.d52c452a.js"><link rel="prefetch" href="/blogs/assets/js/54.1c5e0e4d.js"><link rel="prefetch" href="/blogs/assets/js/55.27a492a2.js"><link rel="prefetch" href="/blogs/assets/js/56.8a0f52c8.js"><link rel="prefetch" href="/blogs/assets/js/58.18db0d8f.js"><link rel="prefetch" href="/blogs/assets/js/59.6aa21825.js"><link rel="prefetch" href="/blogs/assets/js/6.af0ba4ea.js"><link rel="prefetch" href="/blogs/assets/js/60.9007620d.js"><link rel="prefetch" href="/blogs/assets/js/8.48688a0f.js"><link rel="prefetch" href="/blogs/assets/js/9.1aa6713e.js"><link rel="prefetch" href="/blogs/assets/js/vendors~docsearch.a372b0f4.js">
    <link rel="stylesheet" href="/blogs/assets/css/0.styles.9554e1cb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>疏雨滴梧桐</h3> <p class="description" data-v-59e6cb88></p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2024
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blogs/" class="home-link router-link-active"><!----> <span class="site-name">疏雨滴梧桐</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      笔记
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/categories/前端/" class="nav-link"><i class="undefined"></i>
  前端
</a></li></ul></div></div><div class="nav-item"><a href="/blogs/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><!----> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>21</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>24</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      笔记
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/categories/前端/" class="nav-link"><i class="undefined"></i>
  前端
</a></li></ul></div></div><div class="nav-item"><a href="/blogs/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML和CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>构建工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Typescript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blogs/blogs/ts/typescript基础.html" class="sidebar-link">ts基础</a></li><li><a href="/blogs/blogs/ts/类.html" class="active sidebar-link">类</a></li><li><a href="/blogs/blogs/ts/泛型.html" class="sidebar-link">泛型</a></li><li><a href="/blogs/blogs/ts/装饰器.html" class="sidebar-link">装饰器</a></li><li><a href="/blogs/blogs/ts/类型演算.html" class="sidebar-link">类型演算</a></li><li><a href="/blogs/blogs/ts/声明文件.html" class="sidebar-link">声明文件</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>笔记</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>类</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2024
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">类</h1> <div data-v-8a445198><!----> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>12/7/2023</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>typescript</span><span class="tag-item" data-v-8a445198>类</span><span class="tag-item" data-v-8a445198>面向对象</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="类基本"><a href="#类基本" class="header-anchor">#</a> 类基本</h2> <p>tsconfig.json-&gt;<em>compilerOptions</em></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;strictPropertyInitialization&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 严格属性初始化</span>
</code></pre></div><p>属性可以修饰未可选的</p> <p>属性可以修饰未只读的</p> <p>可使用访问修饰符修饰属性和方法</p> <ul><li>public 公开的（默认），所有代码可访问</li> <li>private 私有的 ，只能在类中使用</li> <li>protected 保护的</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> log <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;console&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">enum</span> Gender <span class="token punctuation">{</span>
    Male <span class="token operator">=</span> <span class="token string">'男'</span><span class="token punctuation">,</span>
    Female <span class="token operator">=</span> <span class="token string">'女'</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">readonly</span> id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// 只读</span>
    <span class="token keyword">private</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// 私有</span>
    <span class="token keyword">protected</span> gender<span class="token operator">:</span> Gender <span class="token operator">=</span> Gender<span class="token punctuation">.</span>Male<span class="token punctuation">;</span> <span class="token comment">// 初始化默认值</span>
    pid <span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token comment">// 可选</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 属性简写+赋值：public name: string</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> user<span class="token operator">:</span> User <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">'John Doe'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'user::: '</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="访问器"><a href="#访问器" class="header-anchor">#</a> 访问器</h2> <p><strong>用于控制属性的读取和赋值</strong></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> log <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;console&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> _age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">set</span> <span class="token function">age</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>_age <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&gt;</span> <span class="token number">120</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>_age <span class="token operator">=</span> <span class="token number">120</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>_age <span class="token operator">=</span> value<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">get</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> user<span class="token operator">:</span> User <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token number">25.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
user<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'user::: age'</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="使用类改造扑克牌"><a href="#使用类改造扑克牌" class="header-anchor">#</a> 使用类改造扑克牌</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> log <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;console&quot;</span>

<span class="token keyword">enum</span> Color <span class="token punctuation">{</span>
    heart <span class="token operator">=</span> <span class="token string">'♥'</span><span class="token punctuation">,</span>
    spade <span class="token operator">=</span> <span class="token string">'♠'</span><span class="token punctuation">,</span>
    club <span class="token operator">=</span> <span class="token string">'♣'</span><span class="token punctuation">,</span>
    diamond <span class="token operator">=</span> <span class="token string">'♦'</span>
<span class="token punctuation">}</span>
<span class="token keyword">enum</span> Mark <span class="token punctuation">{</span>
    <span class="token constant">A</span> <span class="token operator">=</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span>
    two <span class="token operator">=</span> <span class="token string">'2'</span><span class="token punctuation">,</span>
    three <span class="token operator">=</span> <span class="token string">'3'</span><span class="token punctuation">,</span>
    four <span class="token operator">=</span> <span class="token string">'4'</span><span class="token punctuation">,</span>
    five <span class="token operator">=</span> <span class="token string">'5'</span><span class="token punctuation">,</span>
    six <span class="token operator">=</span> <span class="token string">'6'</span><span class="token punctuation">,</span>
    seven <span class="token operator">=</span> <span class="token string">'7'</span><span class="token punctuation">,</span>
    eight <span class="token operator">=</span> <span class="token string">'8'</span><span class="token punctuation">,</span>
    nine <span class="token operator">=</span> <span class="token string">'9'</span><span class="token punctuation">,</span>
    ten <span class="token operator">=</span> <span class="token string">'10'</span><span class="token punctuation">,</span>
    <span class="token constant">J</span> <span class="token operator">=</span> <span class="token string">'J'</span><span class="token punctuation">,</span>
    <span class="token constant">Q</span> <span class="token operator">=</span> <span class="token string">'Q'</span><span class="token punctuation">,</span>
    <span class="token constant">K</span> <span class="token operator">=</span> <span class="token string">'K'</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Card</span> <span class="token punctuation">{</span>
    <span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">NormalCard</span> <span class="token keyword">extends</span> <span class="token class-name">Card</span><span class="token punctuation">{</span>
    color<span class="token operator">:</span> Color<span class="token punctuation">,</span>
    mark<span class="token operator">:</span> Mark
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">JokerCard</span> <span class="token keyword">extends</span> <span class="token class-name">Card</span><span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'big'</span> <span class="token operator">|</span> <span class="token string">'small'</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">publishResult</span> <span class="token punctuation">{</span>
    player1<span class="token operator">:</span> Deck<span class="token punctuation">,</span>
    player2<span class="token operator">:</span> Deck<span class="token punctuation">,</span>
    player3<span class="token operator">:</span> Deck<span class="token punctuation">,</span>
    left<span class="token operator">:</span> Deck
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Deck</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> cards<span class="token operator">:</span> Card<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>cards<span class="token operator">?</span><span class="token operator">:</span> Card<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>cards<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cards <span class="token operator">=</span> cards
        <span class="token keyword">else</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>Mark<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>mark <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>Color<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>color <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> normalCard<span class="token operator">:</span>NormalCard <span class="token operator">=</span> <span class="token punctuation">{</span>
                    color<span class="token punctuation">,</span> 
                    mark<span class="token punctuation">,</span>
                    <span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mark<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>cards<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>normalCard<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> smallJoker<span class="token operator">:</span>JokerCard <span class="token operator">=</span> <span class="token punctuation">{</span>
            type<span class="token operator">:</span><span class="token string">'small'</span><span class="token punctuation">,</span>
            <span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token string">'小王'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">const</span> bigJoker<span class="token operator">:</span>JokerCard <span class="token operator">=</span> <span class="token punctuation">{</span>
            type<span class="token operator">:</span><span class="token string">'big'</span><span class="token punctuation">,</span>
            <span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token string">'大王'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cards<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>smallJoker<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cards<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>bigJoker<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token string">'\n'</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cards<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>card<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> str <span class="token operator">=</span> card<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            result <span class="token operator">+=</span> str <span class="token operator">+</span> <span class="token string">'\t'</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">4</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                result <span class="token operator">+=</span> <span class="token string">'\n'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token function">getRandomIndex</span><span class="token punctuation">(</span>min<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> max<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> dec <span class="token operator">=</span> max <span class="token operator">-</span> min
        <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> dec <span class="token operator">+</span> min<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/**
     * 洗牌
     */</span>
    <span class="token function">shuffle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cards<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> randomIndex <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getRandomIndex</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cards<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
            <span class="token keyword">const</span> temp <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cards<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>cards<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cards<span class="token punctuation">[</span>randomIndex<span class="token punctuation">]</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>cards<span class="token punctuation">[</span>randomIndex<span class="token punctuation">]</span> <span class="token operator">=</span> temp
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/**
     * 发牌
     * 斗地主发完牌后有四个card数组，三个人各一个+剩余3张底牌
     */</span>
    <span class="token function">publish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> publishResult <span class="token punctuation">{</span>
        <span class="token keyword">const</span> player1<span class="token operator">:</span>Deck <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">takeCards</span><span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> player2<span class="token operator">:</span>Deck <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">takeCards</span><span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> player3<span class="token operator">:</span>Deck <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">takeCards</span><span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> left<span class="token operator">:</span>Deck <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">takeCards</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            player1<span class="token punctuation">,</span>
            player2<span class="token punctuation">,</span>
            player3<span class="token punctuation">,</span>
            left
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token function">takeCards</span><span class="token punctuation">(</span>n<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> Deck <span class="token punctuation">{</span>
        <span class="token keyword">const</span> cards<span class="token operator">:</span>Card<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            cards<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cards<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> Card<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Deck</span><span class="token punctuation">(</span>cards<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> deck <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Deck</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
deck<span class="token punctuation">.</span><span class="token function">shuffle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> deck<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'player1:--------------'</span><span class="token punctuation">)</span>
result<span class="token punctuation">.</span>player1<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'player2:--------------'</span><span class="token punctuation">)</span>
result<span class="token punctuation">.</span>player2<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'player3:--------------'</span><span class="token punctuation">)</span>
result<span class="token punctuation">.</span>player3<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'left::----------------'</span><span class="token punctuation">)</span>
result<span class="token punctuation">.</span>left<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="类的继承"><a href="#类的继承" class="header-anchor">#</a> 类的继承</h2> <p>描述类与类之间的关系</p> <p>如果A和B都是类，并且可以描述为A是B,则A和B形成继承关系：</p> <ul><li>B是父类，A是子类</li> <li>B派生A，A继承自B</li> <li>B是A的基类，A是B的派生类</li></ul> <p>如果A继承自B，则A中自动拥有B中的所有成员</p> <div class="spinner" style="background:rgb(66, 185, 131);" data-v-1bbcb91a></div><p>成员的重写：</p> <ul><li>子类中覆盖父类的成员</li> <li>子类不能修改父类的成员类型</li> <li>属性和方法都可以重写，但要保证类型匹配</li> <li>注意this关键字：继承关系中，this指向是动态的，根据具体的调用者确定this指向</li> <li>super关键字：在子类的方法中可以使用super关键字读取父类成员</li> <li>类型匹配：鸭子辨型法
<ul><li>子类的对象始终可以赋值给父类</li> <li>面向对象中，这种现象叫做<code>里氏替换原则</code></li> <li>判断具体子类类型，使用<code>instanceof</code></li></ul></li></ul> <p><strong>protected修饰符</strong></p> <p>受保护的成员：</p> <ul><li>只能在自身和子类中使用</li></ul> <p><strong>传递性和单根性</strong></p> <ul><li>单根性：每个类最多只能有一个父类</li> <li>传递性：如果A是B的父类，B是C的父类，则A是C的父类</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> log <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;console&quot;</span>

<span class="token keyword">class</span> <span class="token class-name">Tank</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span><span class="token builtin">number</span><span class="token operator">=</span><span class="token number">0</span>
  y<span class="token operator">:</span><span class="token builtin">number</span><span class="token operator">=</span><span class="token number">0</span>
  <span class="token keyword">protected</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;坦克&quot;</span>
  <span class="token function">shoot</span><span class="token punctuation">(</span>speed<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;发射子弹&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;你好, 我是&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">PlayerTank</span> <span class="token keyword">extends</span> <span class="token class-name">Tank</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span><span class="token builtin">number</span><span class="token operator">=</span><span class="token number">100</span> <span class="token comment">// 成员重写</span>
  y<span class="token operator">:</span><span class="token builtin">number</span><span class="token operator">=</span><span class="token number">200</span>
  life<span class="token operator">:</span><span class="token builtin">number</span><span class="token operator">=</span><span class="token number">5</span>
  <span class="token keyword">private</span> color<span class="token operator">:</span><span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span>
  <span class="token keyword">protected</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;玩家坦克&quot;</span>
  <span class="token function">shoot</span><span class="token punctuation">(</span>speed<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;玩家坦克发射子弹&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">EnemyTank</span> <span class="token keyword">extends</span> <span class="token class-name">Tank</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;敌方坦克&quot;</span>
  <span class="token function">shoot</span><span class="token punctuation">(</span>speed<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;敌方坦克发射子弹&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
      <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;====我是&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  health<span class="token operator">:</span><span class="token builtin">number</span><span class="token operator">=</span><span class="token number">1</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">EnemyTankBoss</span> <span class="token keyword">extends</span> <span class="token class-name">EnemyTank</span> <span class="token punctuation">{</span>
  health<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">10</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> playerTank<span class="token operator">:</span>Tank <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PlayerTank</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
playerTank<span class="token punctuation">.</span><span class="token function">shoot</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
playerTank<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>playerTank <span class="token keyword">instanceof</span> <span class="token class-name">PlayerTank</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;玩家坦克生命值：&quot;</span> <span class="token operator">+</span> playerTank<span class="token punctuation">.</span>life<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> enemyTank <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EnemyTank</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> bossTank<span class="token operator">:</span>Tank <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EnemyTankBoss</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
enemyTank<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
enemyTank<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="抽象类"><a href="#抽象类" class="header-anchor">#</a> 抽象类</h2> <p>以象棋为例，只表示抽象概念，主要用于提取子类共有的成员，而不能直接创建它的对象，该类可以作为抽象类：<strong>abstract</strong> <strong>class</strong>，抽象类不可以创建对象</p> <div class="spinner" style="background:rgb(66, 185, 131);" data-v-1bbcb91a></div><p>抽象成员：父类中，有些成员必须存在，但不知道该成员的值或实现是什么，要有强约束，让继承该类的子类，必须要实现该成员<strong>abstract</strong> <strong>props</strong></p> <p>抽象成员只能出现在抽象类中，抽象成员必须在子类中实现</p> <p><strong>设计模式</strong>：面对一些常见的功能场景，有一些固定的，经过多年实践的成熟方法，这些方法称之为设计模式</p> <p><strong>模版模式</strong>：有些方法，所有子列实现的流程完全一致，只是流程中的某个步骤的具体实现不同，可以将该方法提取到父类，遇到实现不一致的方法时，将该方法做成抽象方法</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> log <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;console&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Chess</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  y<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">abstract</span> <span class="token keyword">readonly</span> name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token function">move</span><span class="token punctuation">(</span>targetX<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span> targetY<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">boolean</span><span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1.边界判断'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2.判断目标位置是否有己方棋子'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'3.棋子移动规则判断'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不同之处</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">rule</span><span class="token punctuation">(</span>targetX<span class="token punctuation">,</span> targetY<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'4.移动'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> targetX<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> targetY<span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'移动'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span><span class="token string">'到'</span> <span class="token operator">+</span> targetX <span class="token operator">+</span> <span class="token string">','</span> <span class="token operator">+</span> targetY<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">protected</span> <span class="token keyword">abstract</span> <span class="token function">rule</span><span class="token punctuation">(</span>targetX<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span> targetY<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Horse</span> <span class="token keyword">extends</span> <span class="token class-name">Chess</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;马&quot;</span><span class="token punctuation">;</span>
  <span class="token function">rule</span><span class="token punctuation">(</span>targetX<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> targetY<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Pao</span> <span class="token keyword">extends</span> <span class="token class-name">Chess</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> <span class="token keyword">readonly</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">rule</span><span class="token punctuation">(</span>targetX<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> targetY<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Soldier</span> <span class="token keyword">extends</span> <span class="token class-name">Chess</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;兵&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">rule</span><span class="token punctuation">(</span>targetX<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> targetY<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> h <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Horse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pao</span><span class="token punctuation">(</span><span class="token string">'炮'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Soldier</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
s<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
h<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="静态成员"><a href="#静态成员" class="header-anchor">#</a> 静态成员</h2> <p>静态成员是指，附着在类上的成员（属于某个构造函数的成员）</p> <p>使用static修饰的成员是静态成员</p> <ul><li><p>实例成员：对象成员，属于某个类的对象</p></li> <li><p>静态成员：非实例成员，属于某个类</p></li> <li><p>实例方法中的this指向的是<strong>当前对象</strong></p></li> <li><p>静态方法中的this指向的是<strong>当前类</strong></p></li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> log <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;console&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>
    <span class="token keyword">public</span> loginId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    <span class="token keyword">public</span> loginPwd<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    <span class="token keyword">public</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    <span class="token keyword">public</span> age<span class="token operator">:</span> <span class="token builtin">number</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    User<span class="token punctuation">.</span>loginUser<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token keyword">static</span> loginUser<span class="token operator">:</span> User<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">login</span><span class="token punctuation">(</span>loginId<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">,</span> loginPwd<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> User<span class="token operator">|</span><span class="token keyword">undefined</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loginUser<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>user <span class="token operator">=&gt;</span> user<span class="token punctuation">.</span>loginId <span class="token operator">===</span> loginId <span class="token operator">&amp;&amp;</span> user<span class="token punctuation">.</span>loginPwd <span class="token operator">===</span> loginPwd<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, your age is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> u1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;user1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;user1&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> u2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;user2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;user2&quot;</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> u3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;user3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;user3&quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> loginUser <span class="token operator">=</span> User<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token string">&quot;user2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>loginUser<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  loginUser<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>单例模式</strong></p> <p>系统中最多只存在一个实例对象，使用单例模式进行强约束</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> log <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;console&quot;</span>

<span class="token keyword">class</span> <span class="token class-name">Board</span> <span class="token punctuation">{</span>
  width<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">10</span>
  height<span class="token operator">:</span> <span class="token builtin">number</span>  <span class="token operator">=</span> <span class="token number">10</span>
  <span class="token keyword">private</span> <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>
  <span class="token comment">// static readonly instance = new Board() // 简单写法</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> _board<span class="token operator">?</span><span class="token operator">:</span>Board
  <span class="token keyword">static</span> <span class="token function">createBoard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>Board <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_board<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_board
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_board <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Board</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_board
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> b1 <span class="token operator">=</span> Board<span class="token punctuation">.</span><span class="token function">createBoard</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> b2 <span class="token operator">=</span> Board<span class="token punctuation">.</span><span class="token function">createBoard</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">log</span><span class="token punctuation">(</span>b1 <span class="token operator">===</span> b2<span class="token punctuation">)</span>
</code></pre></div><h2 id="类与接口"><a href="#类与接口" class="header-anchor">#</a> 类与接口</h2> <p>面向对象领域中的接口的语义：表达了某个类是否拥有某种能力</p> <p>某个类具有某种能力，就是实现了某种接口</p> <p><strong>implements</strong>关键字</p> <p><strong>接口和类型别名的最大区别：接口可以被类实现，类型别名不可以</strong></p> <blockquote><p>接口可以继承类，表示该类的所有成员都在接口中</p> <p>接口可以实现多继承</p></blockquote> <blockquote><p>使用类型保护函数进行是否有某种接口实现的判断</p> <p>通过调用类型保护函数，出触发TS的类型保护**，**该函数必须返回boolean</p></blockquote> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token keyword">public</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">abstract</span> type<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, I'm </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, I'm </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> years old, and I'm a </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">type</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">IFileShow</span> <span class="token punctuation">{</span>
  <span class="token function">singleFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">doubleFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">ISkillShow</span> <span class="token punctuation">{</span>
  <span class="token function">dumuqiao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">zougangsi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span>  <span class="token class-name">ILearnShow</span><span class="token punctuation">{</span>
  <span class="token function">suanshu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Lion</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token keyword">implements</span> <span class="token class-name">IFileShow</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  type <span class="token operator">=</span> <span class="token string">'狮子'</span><span class="token punctuation">;</span>
  <span class="token function">singleFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 单火圈表演</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">doubleFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 双火圈表演</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Tiger</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token keyword">implements</span> <span class="token class-name">IFileShow</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  type <span class="token operator">=</span> <span class="token string">'老虎'</span><span class="token punctuation">;</span>
  <span class="token function">singleFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 单火圈表演</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">doubleFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 双火圈表演</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Monky</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token keyword">implements</span> <span class="token class-name">ISkillShow</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  type <span class="token operator">=</span> <span class="token string">'猴子'</span><span class="token punctuation">;</span>
  <span class="token function">dumuqiao</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 独木桥表演</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">zougangsi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 走钢丝表演</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token keyword">implements</span> <span class="token class-name">ILearnShow</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  type <span class="token operator">=</span> <span class="token string">'狗'</span><span class="token punctuation">;</span>
  <span class="token function">suanshu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 算数表演</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 跳舞表演</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> lion <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Lion</span><span class="token punctuation">(</span><span class="token string">'大毛'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> tiger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tiger</span><span class="token punctuation">(</span><span class="token string">'小毛'</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> monky <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Monky</span><span class="token punctuation">(</span><span class="token string">'黄毛'</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'小黑'</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> dog2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'旺财'</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> animals <span class="token operator">:</span> Animal<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>lion<span class="token punctuation">,</span> tiger<span class="token punctuation">,</span> monky<span class="token punctuation">,</span> dog<span class="token punctuation">,</span> dog2<span class="token punctuation">]</span><span class="token punctuation">;</span>
animals<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>animal <span class="token operator">=&gt;</span> animal<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 类型保护函数</span>
<span class="token keyword">function</span> <span class="token function">hasFileShow</span><span class="token punctuation">(</span>animal<span class="token operator">:</span> object<span class="token punctuation">)</span><span class="token operator">:</span>animal <span class="token keyword">is</span> IFileShow <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>animal <span class="token keyword">as</span> IFileShow<span class="token punctuation">)</span><span class="token punctuation">.</span>singleFile <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>animal <span class="token keyword">as</span> IFileShow<span class="token punctuation">)</span><span class="token punctuation">.</span>doubleFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">hasSkillShow</span><span class="token punctuation">(</span>animal<span class="token operator">:</span>object<span class="token punctuation">)</span><span class="token operator">:</span> animal <span class="token keyword">is</span> ISkillShow <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>animal <span class="token keyword">as</span> ISkillShow<span class="token punctuation">)</span><span class="token punctuation">.</span>dumuqiao <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>animal <span class="token keyword">as</span> ISkillShow<span class="token punctuation">)</span><span class="token punctuation">.</span>zougangsi<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">hasLearnShow</span><span class="token punctuation">(</span>animal<span class="token operator">:</span> object<span class="token punctuation">)</span><span class="token operator">:</span> animal <span class="token keyword">is</span> ILearnShow <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>animal <span class="token keyword">as</span> ILearnShow<span class="token punctuation">)</span><span class="token punctuation">.</span>suanshu <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>animal <span class="token keyword">as</span> ILearnShow<span class="token punctuation">)</span><span class="token punctuation">.</span>dance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


animals<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>animal <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">hasFileShow</span><span class="token punctuation">(</span>animal<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    animal<span class="token punctuation">.</span><span class="token function">singleFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    animal<span class="token punctuation">.</span><span class="token function">doubleFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">hasSkillShow</span><span class="token punctuation">(</span>animal<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    animal<span class="token punctuation">.</span><span class="token function">dumuqiao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    animal<span class="token punctuation">.</span><span class="token function">zougangsi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">hasLearnShow</span><span class="token punctuation">(</span>animal<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    animal<span class="token punctuation">.</span><span class="token function">suanshu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    animal<span class="token punctuation">.</span><span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="索引器"><a href="#索引器" class="header-anchor">#</a> 索引器</h2> <p><code>对象[值]</code>的方式，使用成员表达式</p> <ul><li><p>在TS中，默认情况下，不对索引器（成员表达式）做严格的类型检查</p></li> <li><p>开启严格检查<code>&quot;noImplicitAny&quot;: true,</code></p></li> <li><p>隐式any:TS根据实际情况推导出的any类型</p></li> <li><p>在索引器中，键的类型可以是字符串，也可以是数字，还可以是<em>symbol</em></p></li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;noImplicitAny&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//开启隐式any类型检查</span>
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>prop<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
  <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">[</span><span class="token string">'test'</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
user<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
user<span class="token punctuation">[</span><span class="token string">&quot;pid&quot;</span><span class="token punctuation">]</span>
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> log <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;console&quot;</span>

<span class="token keyword">class</span> <span class="token class-name">MyArray</span> <span class="token punctuation">{</span>
  <span class="token number">0</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
  <span class="token punctuation">[</span>index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
  <span class="token punctuation">[</span>index<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
  <span class="token punctuation">[</span>index<span class="token operator">:</span> <span class="token builtin">symbol</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
arr<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span>
arr<span class="token punctuation">[</span><span class="token string">'3'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">5</span>
<span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
</code></pre></div><p>TS索引器的作用：</p> <ul><li>严格模式下，可以实现为类动态增加成员</li> <li>可以实现动态的操作类成员</li></ul> <p>JS中所有的成员名本质上都是字符串，如果使用数字作为成员名，会自动转换为字符串</p> <p>TS中，索引器的number类型本质上类型还是string类型</p> <h2 id="this指向约束"><a href="#this指向约束" class="header-anchor">#</a> this指向约束</h2> <p><strong>JS中this指向的几种情况：</strong></p> <p>大部分时候，this的指向取决于函数的调用方式：</p> <ul><li>直接调用（全局调用），this指向全局对象或undefined（启用严格模式）</li> <li>如果使用<code>对象.方法</code>调用，this指向对象本身</li> <li>如果是dom事件的处理函数，this指向事件处理对象</li></ul> <p>特殊情况：</p> <ul><li>箭头函数，this在函数声明时确定指向，指向函数位置的this</li> <li>使用bind,apply,call手动绑定this对象</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, my name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, and I am </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> years old.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">'John'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> say <span class="token operator">=</span> user<span class="token punctuation">.</span>sayHello<span class="token punctuation">;</span>
<span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 类中默认使用严格模式，此时this指向undefined</span>
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  sayHello <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, my name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, and I am </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> years old.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">'John'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> say <span class="token operator">=</span> user<span class="token punctuation">.</span>sayHello<span class="token punctuation">;</span>
<span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 箭头函数指向声明时的this,此时没问题</span>
</code></pre></div><p>不允许this隐式的指向any</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;noImplicitThis&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//开启隐式this类型检查</span>
</code></pre></div><p>在TS中，允许在书写函数时，手动声明该函数中this的指向：将this作为函数的第一个参数,该参数只用于约束this,并不是真正的参数，也不会出现在编译结果中</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">IUser</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token function-variable function">sayHello</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> IUser<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> user<span class="token operator">:</span> IUser <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'张三'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello, I am '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> say <span class="token operator">=</span> user<span class="token punctuation">.</span>sayHello<span class="token punctuation">;</span>
<span class="token function">say</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> User<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, my name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, and I am </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> years old.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">'John'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> say <span class="token operator">=</span> user<span class="token punctuation">.</span>sayHello<span class="token punctuation">;</span>
<span class="token function">say</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="俄罗斯方块游戏"><a href="#俄罗斯方块游戏" class="header-anchor">#</a> 俄罗斯方块游戏</h2> <p>技术：vite+ jquery + typescript + 面向对象</p> <ul><li>TS结合vite做开发</li> <li>练习TS知识</li> <li>练习思维能力</li> <li>面向对象编程思想</li></ul> <p>使用npm init vite初始化一个只使用vite和ts的项目</p> <p>开发原则：</p> <ul><li>单一职能原则：每个类制作跟它相关的一件事</li> <li>开闭原则：系统中的类，应该对扩展开放，对修改关闭</li> <li>数据-界面分离</li></ul> <p>传统面向对象书写类的属性时，一般进行如下操作：</p> <ul><li>所有属性全部私有化</li> <li>提供公开的方法提供对属性的访问</li></ul> <p>游戏源码：<a href="https://gitee.com/lianycc/tetris-vite-ts" target="_blank" rel="noopener noreferrer">tetris-vite-ts<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><p>小方块类：能处理自己的数据，知道什么时候需要显示，但不知道怎么显示</p></li> <li><p>小方块的显示类：用于显示一个小方块到页面上</p></li> <li><p>小方块组合类：组合方块形成图形</p> <ul><li>数组的组成不能变化</li> <li>方块的组合，去取决于组合的形状（一组相对坐标的组合，组合中有一个特殊坐标，表示形状的中心）</li></ul></li> <li><p>俄罗斯方块的生产类</p></li> <li><p>俄罗斯方块规则类</p></li> <li><p>俄罗斯方块旋转：根据当前形状，算出旋转后的形状</p> <ul><li>有些方块不需要旋转：田字方块</li> <li>有些方块只有两种状态：直条，z字</li> <li>将SquareGroup作为父类，其他方块都是它的子类，子类可以重写父类的方法</li> <li>旋转不能超出边界</li></ul></li> <li><p>游戏类</p> <ul><li>Game类清楚什么时候进行显示的切换，但不知道如何显示</li> <li>设置游戏显示器</li></ul></li> <li><p>触底处理</p> <ul><li><p>当前方块到达最底部</p></li> <li><p>什么时候可能发生触底</p> <ul><li>自动下落</li> <li>玩家控制下落</li></ul></li> <li><p>触底之后做什么</p> <ul><li>切换方块</li> <li>保存已落下的方块进行边缘检查</li> <li>方块消除
<ul><li>从界面移除</li> <li>从已有方块数组中移除</li> <li>改变y坐标</li></ul></li> <li>游戏是否结束判断</li></ul></li></ul></li></ul></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间: </span> <span class="time">2023年12月25日星期一晚上11点20分</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/blogs/blogs/ts/typescript基础.html" class="prev">
          ts基础
        </a></span> <span class="next"><a href="/blogs/blogs/ts/泛型.html">
          泛型
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/blogs/blogs/ts/%E7%B1%BB.html#类基本" class="sidebar-link reco-side-类基本" data-v-b57cc07c>类基本</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/blogs/ts/%E7%B1%BB.html#访问器" class="sidebar-link reco-side-访问器" data-v-b57cc07c>访问器</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/blogs/ts/%E7%B1%BB.html#使用类改造扑克牌" class="sidebar-link reco-side-使用类改造扑克牌" data-v-b57cc07c>使用类改造扑克牌</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/blogs/ts/%E7%B1%BB.html#类的继承" class="sidebar-link reco-side-类的继承" data-v-b57cc07c>类的继承</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/blogs/ts/%E7%B1%BB.html#抽象类" class="sidebar-link reco-side-抽象类" data-v-b57cc07c>抽象类</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/blogs/ts/%E7%B1%BB.html#静态成员" class="sidebar-link reco-side-静态成员" data-v-b57cc07c>静态成员</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/blogs/ts/%E7%B1%BB.html#类与接口" class="sidebar-link reco-side-类与接口" data-v-b57cc07c>类与接口</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/blogs/ts/%E7%B1%BB.html#索引器" class="sidebar-link reco-side-索引器" data-v-b57cc07c>索引器</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/blogs/ts/%E7%B1%BB.html#this指向约束" class="sidebar-link reco-side-this指向约束" data-v-b57cc07c>this指向约束</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/blogs/ts/%E7%B1%BB.html#俄罗斯方块游戏" class="sidebar-link reco-side-俄罗斯方块游戏" data-v-b57cc07c>俄罗斯方块游戏</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><canvas id="vuepress-canvas-cursor"></canvas><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      欢迎来到 疏雨滴梧桐
    </div> <div class="operation" style="right:90px;bottom:40px;display:none;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:none;" data-v-5775ee02></i></div> <canvas id="banniang" width="150" height="220" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div><div></div></div></div>
    <script src="/blogs/assets/js/app.806ab8a6.js" defer></script><script src="/blogs/assets/js/7.d7a2e24c.js" defer></script><script src="/blogs/assets/js/2.ccd2aa3f.js" defer></script><script src="/blogs/assets/js/1.39ac306c.js" defer></script><script src="/blogs/assets/js/57.56a23c25.js" defer></script>
  </body>
</html>
